tasks:

$ rake -T app
(in /home/photos)
rake app:deploy                     # deploy to master state
rake app:deploy:after               # after deploy hook for you to override
rake app:deploy:before              # before deploy hook for you to override
rake app:gem:install                # install gems from github
rake app:git:clone                  # clone repoitory from github
rake app:git:gc                     # git gc
rake app:git:pull                   # pull anything from origin
rake app:git:reset                  # make anything reflect master state
rake app:install                    # install this application
rake app:install:after              # after install hook for you to override
rake app:install:before             # before install hook for you to override
rake app:merb:restart               # restart the merb server
rake app:merb:start[config]         # start the merb server, default config...
rake app:merb:stop                  # stop the merb server
rake app:mongrel:restart            # restart the mongrel cluster
rake app:mongrel:start              # start the mongrel cluster
rake app:mongrel:stop               # stop the mongrel cluster
rake app:nginx:restart              # reload config
rake app:nginx:start[config,nginx]  # start nginx, default config is config...
rake app:nginx:stop                 # stop nginx
rake app:server:restart             # please define your server:restart task
rake app:thin:restart[config]       # restart the thin cluster
rake app:thin:start[config]         # start the thin cluster
rake app:thin:stop[config]          # stop the thin cluster



example Rakefile:

unless defined?(AppDeploy)
  # install app-deploy
  path = 'lib/tasks/app-deploy'
  `git clone git://github.com/godfat/app-deploy.git #{path}`
  puts "Please re-invoke: rake #{ARGV.join(' ')}"
  exit(1)
end

# install gem callback
AppDeploy.dependency_gem :github_user    => 'godfat',
                         :github_project => 'thumbo' do
  sh 'rake clobber'
  sh 'rake gem:package'
  sh 'gem install --local pkg/thumbo-*.gem --no-ri --no-rdoc'
end

# use bones way same sa above
AppDeploy.dependency_gem :github_user    => 'godfat',
                         :github_project => 'friendly_format',
                         :task_gem       => 'bones'

# use hoe way
AppDeploy.dependency_gem :github_user    => 'godfat',
                         :github_project => 'mogilefs-client',
                         :task_gem       => 'hoe'

AppDeploy.dependency     :github_user    => 'godfat',
                         :github_project => 'in_place_editing',
                         :git_path       => 'vendor/plugins/in_place_editing'

AppDeploy.dependency     :github_user    => 'godfat',
                         :github_project => 'app-deploy',
                         :git_path       => 'lib/tasks/app-deploy'

namespace :app do
  namespace :install do
    task :before do
      sh 'gem install bones --no-ri --no-rdoc' if `gem which bones` =~ /Can't find/
    end
  end

  namespace :server do
    task :restart => 'thin:restart'
  end
end
