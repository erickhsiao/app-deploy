example:

$ rake -T app
(in /home/photos)
rake app:deploy              # deploy to master state
rake app:deploy:after        # after deploy hook for you to override
rake app:deploy:before       # before deploy hook for you to override
rake app:git:pull            # pull anything from origin
rake app:git:reset           # make anything reflect master state
rake app:install             # install this application
rake app:install:after       # after install hook for you to override
rake app:install:before      # before install hook for you to override
rake app:mongrel:restart     # restart the mongrel cluster
rake app:mongrel:start       # start the mongrel cluster
rake app:mongrel:stop        # stop the mongrel cluster
rake app:nginx:restart       # reload config
rake app:nginx:start[nginx]  # start nginx, default nginx is /usr/sbin/nginx
rake app:nginx:stop          # stop nginx
rake app:server:restart      # override it if you don't use thin
rake app:thin:restart        # restart the thin cluster
rake app:thin:start          # start the thin cluster
rake app:thin:stop           # stop the thin cluster

Rakefile:

begin
  AppDeploy

rescue NameError
  # install app-deploy
  path = 'lib/tasks/app-deploy'
  `git clone git://github.com/godfat/app-deploy.git #{path}`
  load 'lib/tasks/app-deploy/app-deploy.rake'
  `rm -rf #{path}`

ensure
  AppDeploy.dependency_gem 'godfat', 'thumbo'
  AppDeploy.dependency_gem 'godfat', 'friendly_format'
  AppDeploy.dependency     'godfat', 'in_place_editing', 'vendor/plugins/in_place_editing'
  AppDeploy.dependency     'godfat', 'app-deploy', 'lib/tasks/app-deploy'

end

namespace :app do
  namespace :install do
    task :before do
      sh 'gem install bones'
    end

  end
end
